<!DOCTYPE html>
<html>
	<title>&nbsp;</title>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
	</head>
	<body>
		<!-- Start of first page I -->
		<div data-role="page" id="page1">
			<!-- Header -->
			<div data-role="header">
				<h1>Phonegap Template &amp;</h1>

			</div>
			<!-- /header -->
			<!-- Content    -->
			<div data-role="content">
				<h3>Content</h3>
				<p>
					Blah blah blah blah
				</p>
			</div>
			<!-- /content -->
			<!-- footer -->
			<div data-role="footer">
				<h4>&copy; 2013 Your Name</h4>
			</div>
			<!-- /footer -->
		</div>
		<!-- /page -->
	</body>
</html>
<script>
	document.addEventListener("deviceready", onDeviceReady, false);
	window.addEventListener('orientationchange', doOnOrientationChange);

	function onDeviceReady() {
		document.addEventListener("pause", onPause, false);
		document.addEventListener("resume", onResume, false);
		alert("Device is Ready");
	}

	function onPause(){	
		//alert("paused!");
		confirm("Paused - Press a button!");
		navigator.notification.beep(1);
		}

	function onResume(){	
		//alert("resume");
		confirm("Resumed - Press a button!");
		navigator.notification.beep(2);
		}
		
	function doOnOrientationChange() {
		switch(window.orientation) {  
			case -90:
			case 90:
				alert('landscape');
				break; 
			default:
				alert('portrait');
				break; 
			}	
		}
		
	// My application is using jQuery Mobile which by default only updates DOM rather reloading entire page, 
	// that way my setInterval() keeps running once started.	
	// http://stackoverflow.com/questions/14747935/jquery-mobile-interval-cant-stop-running-in-the-background
	var myVar = setInterval(myTimer, 5000);
	function myTimer() {
		//navigator.notification.beep(1);
		navigator.notification.vibrate(1000);
	}
	

    	//https://github.com/katzer/cordova-plugin-background-mode
    	//<gap:plugin name="de.appplant.cordova.plugin.background-mode" version="0.6.3" />
    	//cordova.plugins.backgroundMode.enable();
    	
    	//cordova.plugins.backgroundMode.enable();
    	document.addEventListener('deviceready', function () {
	    cordova.plugins.backgroundMode.setDefaults({ text:'Doing heavy tasks.'});
	    
	    // Enable background mode
	    cordova.plugins.backgroundMode.enable();
	    alert('plugin enabled');
	    
	    // Called when background mode has been activated
	    cordova.plugins.backgroundMode.onactivate = function () {
	        setTimeout(function () {
	            // Modify the currently displayed notification
	            cordova.plugins.backgroundMode.configure({
	                text:'Running in background for more than 5s now.'
	            });
	        }, 5000);
	        alert('done');
	    }
    
	}, false);
	

	$(document).on('pagebeforeshow', '#page1', function(){   
            setInterval(myBeeper, 7000);
    	});

	function myBeeper() {
		navigator.notification.beep(1);
		//navigator.notification.vibrate(1000);
	}
	
	function myBeeper2() {
		navigator.notification.beep(2);
		//navigator.notification.vibrate(1000);
	}


</script>
